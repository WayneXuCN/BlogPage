---
import IconArchive from "@/assets/icons/IconArchive.svg";
import { getLangFromUrl } from "@/i18n/utils";
import { SITE } from "@/config";

export interface Props {
  category: string;
  categoryName: string;
  size?: "sm" | "lg";
  lang?: string;
}

const { category, categoryName, size = "sm", lang } = Astro.props;
const currentLang = lang || getLangFromUrl(Astro.url);
---

<li
  class:list={[
    "group inline-block group-hover:cursor-pointer",
    size === "sm" ? "my-1 underline-offset-4" : "mx-1 my-3 underline-offset-8",
  ]}
>
  {
    SITE.pages.categories.enabled ? (
      <a
        href={`/${currentLang}/categories/${category}/`}
        transition:name={category}
        class:list={[
          "relative pe-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 focus-visible:no-underline",
          { "text-sm": size === "sm" },
        ]}
      >
        <IconArchive
          class:list={[
            "inline-block opacity-80",
            { "-me-3.5 size-4": size === "sm" },
            { "-me-5 size-6": size === "lg" },
          ]}
        />
        &nbsp;<span>{categoryName}</span>
      </a>
    ) : (
      <span
        class:list={[
          "relative pe-2 text-lg text-muted-foreground",
          { "text-sm": size === "sm" },
        ]}
      >
        <IconArchive
          class:list={[
            "inline-block opacity-70",
            { "-me-3.5 size-4": size === "sm" },
            { "-me-5 size-6": size === "lg" },
          ]}
        />
        &nbsp;<span>{categoryName}</span>
      </span>
    )
  }
</li>
